# Bot DAATCS - Railway Edition ğŸš€

Bot de WhatsApp optimizado para Railway con protecciones anti-baneo integradas.

## ğŸŒŸ CaracterÃ­sticas

- âœ… **Optimizado para Railway** - ConfiguraciÃ³n especÃ­fica para la nube
- âœ… **Servidor Express integrado** - Health checks y endpoints Ãºtiles
- âœ… **Protecciones anti-baneo** - Delays y lÃ­mites inteligentes
- âœ… **Heartbeat automÃ¡tico** - Evita que Railway suspenda el servicio
- âœ… **GestiÃ³n de memoria optimizada** - Para contenedores limitados
- âœ… **QR Code vÃ­a web** - Accesible desde el navegador
- âœ… **Logs optimizados** - Para Railway Dashboard

## ğŸš€ Desplegar en Railway

### MÃ©todo 1: Desde GitHub (Recomendado)

1. **Fork este repositorio** en tu GitHub
2. **Ve a [Railway.app](https://railway.app)** y conecta tu GitHub
3. **Crea un nuevo proyecto** â†’ "Deploy from GitHub repo"
4. **Selecciona tu fork** del bot
5. **Railway detectarÃ¡ automÃ¡ticamente** la configuraciÃ³n
6. **Espera el despliegue** (2-3 minutos)

### MÃ©todo 2: Railway CLI

```bash
# Instalar Railway CLI
npm install -g @railway/cli

# Login
railway login

# Inicializar proyecto
railway init
railway link

# Desplegar
railway up
```

### MÃ©todo 3: Subida directa

1. Sube todos los archivos a Railway
2. Railway detectarÃ¡ el `package.json` automÃ¡ticamente
3. Se iniciarÃ¡ el build y despliegue

## ğŸ“ Estructura de archivos necesarios

```
bot-daatcs-railway/
â”œâ”€â”€ bot.js                 # Bot principal (optimizado para Railway)
â”œâ”€â”€ package.json           # Dependencias
â”œâ”€â”€ railway.toml           # ConfiguraciÃ³n Railway
â”œâ”€â”€ nixpacks.toml          # Build configuration
â”œâ”€â”€ Dockerfile             # Alternativo (opcional)
â””â”€â”€ README.md             # Esta guÃ­a
```

## ğŸ”§ ConfiguraciÃ³n en Railway

### Variables de entorno (automÃ¡ticas):
- `PORT` - Puerto del servidor (Railway lo asigna)
- `RAILWAY_STATIC_URL` - URL pÃºblica del bot
- `NODE_ENV=production` - Modo producciÃ³n

### URLs importantes:
- **Bot status:** `https://tu-bot.railway.app/`
- **CÃ³digo QR:** `https://tu-bot.railway.app/qr`
- **EstadÃ­sticas:** `https://tu-bot.railway.app/stats`

## ğŸ“± Configurar WhatsApp

### 1. Obtener cÃ³digo QR:
```bash
# OpciÃ³n 1: Ver logs en Railway Dashboard
# OpciÃ³n 2: Visitar https://tu-bot.railway.app/qr
# OpciÃ³n 3: Railway CLI
railway logs
```

### 2. Escanear con WhatsApp Business:
- Abre **WhatsApp Business** (no normal)
- Ve a **ConfiguraciÃ³n** â†’ **Dispositivos vinculados**
- **Escanea** el cÃ³digo QR
- Espera confirmaciÃ³n de conexiÃ³n

### 3. Crear grupo:
- Crea un grupo llamado **"PEDIDOS DAATCS"**
- Agrega los usuarios necesarios
- El bot se conectarÃ¡ automÃ¡ticamente

## ğŸ¤– Comandos del Bot

Una vez conectado en tu grupo:

### Comandos principales:
- `/ayuda` - Ver todos los comandos
- `/lista` - Pedidos activos
- `/stats` - EstadÃ­sticas completas
- `/estado [ID] [nuevo_estado]` - Cambiar estado pedido
- `/salud` - Estado del bot
- `/railway` - Info del servidor

### Estados disponibles:
- `pendiente`, `confirmado`, `proceso`, `diseÃ±o`
- `produccion`, `control`, `listo`, `entregado`
- `cancelado`, `pausado`

## ğŸ›¡ï¸ Protecciones Anti-Baneo

### ConfiguraciÃ³n optimizada:
- **LÃ­mite:** 15 mensajes/hora (reducido para Railway)
- **Delays:** 3-7 segundos entre mensajes
- **Horario:** 6:00 AM - 10:00 PM
- **Heartbeat:** Cada 25 minutos
- **Memoria:** Optimizada para contenedores

## ğŸ“Š Monitoreo

### Health Check:
```bash
curl https://tu-bot.railway.app/
```

### Ver estadÃ­sticas:
```bash
curl https://tu-bot.railway.app/stats
```

### Logs en tiempo real:
```bash
railway logs --follow
```

## ğŸ”§ SoluciÃ³n de problemas

### Bot no se conecta:
1. Verifica los logs: `railway logs`
2. Revisa el status: visita `https://tu-bot.railway.app/`
3. Si es necesario, redeploy: `railway up --detach`

### Error de memoria:
Railway automÃ¡ticamente reiniciarÃ¡ el bot si usa mucha memoria.

### QR no aparece:
1. Visita: `https://tu-bot.railway.app/qr`
2. O verifica logs: `railway logs`
3. El QR se regenera automÃ¡ticamente

### Grupo no encontrado:
1. AsegÃºrate que el grupo se llame exactamente **"PEDIDOS DAATCS"**
2. Usa **WhatsApp Business**, no WhatsApp normal
3. Verifica logs para ver grupos disponibles

## ğŸ’° Costos de Railway

- **Plan Hobby:** $5/mes - Perfecto para este bot
- **Recursos incluidos:** Suficientes para WhatsApp Bot
- **Sleep mode:** El bot tiene heartbeat para evitarlo

## ğŸ”„ Actualizar el bot

### Desde GitHub:
1. Haz push a tu repositorio
2. Railway detectarÃ¡ cambios automÃ¡ticamente
3. Se redespliegarÃ¡ automÃ¡ticamente

### Desde CLI:
```bash
railway up
```

## ğŸ“ Soporte

Si tienes problemas:

1. **Revisa los logs** en Railway Dashboard
2. **Verifica el status** en `https://tu-bot.railway.app/`
3. **Consulta la documentaciÃ³n** de Railway
4. **Revisa que WhatsApp Business** estÃ© funcionando

## ğŸ¯ PrÃ³ximos pasos

1. **Despliega** en Railway siguiendo esta guÃ­a
2. **Escanea el QR** con WhatsApp Business  
3. **Crea el grupo** "PEDIDOS DAATCS"
4. **Prueba los comandos** (`/ayuda`, `/stats`)
5. **Â¡Disfruta tu bot 24/7 en la nube!** â˜ï¸

---

**Â¡Bot DAATCS listo para Railway! ğŸš€**